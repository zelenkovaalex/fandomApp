<body class='show' style="width: 100%;">
  <p style="color: green"><%= notice %></p>

  <div class='O_info'>
    <% if @trail %>
      <div class="M_pic">
        <%= image_tag @trail.image.url, alt: @trail.title %>
      </div>
      <h2><%= @trail.title %></h2>
      <h3>
        <% if @trail.fandom %>
          <%= link_to @trail.fandom.name, fandom_path(@trail.fandom) %>
        <% end %>
      </h3>
      <p><%= @trail.body %></p>
    <% else %>
      <p>Маршрут не найден.</p>
    <% end %>
    <br>

    <div class="W_buttons">
      <% if @trail && current_user && (current_user.admin? || current_user == @trail.user) %>
        <%= link_to "редактировать", edit_admin_trail_path(@trail) %>
        <button class="custom-delete-button" data-url="<%= admin_fandom_path(@trail) %>">Удалить</button>
      <% end %> <br>
      <%= link_to "вернуться к фандому", fandom_path(@trail.fandom), class: 'back' %>
    </div>
  </div>

  <!-- Блок для отображения точек маршрута -->
  <div class="W_points">
    <h2>Точки маршрута:</h2>
    <% if @trail_points.any? %>
      <ul>
        <% @trail_points.each do |point| %>
          <li>
            <h3><%= point.name %></h3>
            <p><%= point.description %></p>
            <% if point.image_url.present? %>
              <img src="<%= point.image_url.url %>" alt="<%= point.name %>" style="max-width: 300px;">
            <% end %>
            <p>Координаты: <%= "#{point.latitude}, #{point.longitude}" %></p>
            <p>Ссылка на карту: <%= link_to 'Открыть на карте', point.map_link, target: '_blank' if point.map_link.present? %></p>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p>Для этого маршрута пока нет точек.</p>
    <% end %>
  </div>

  <div class="W_comments">
    <div class="O_newComent">
      <%= render partial: "comments/form", locals: { url: trail_comments_path(@trail), comment: Comment.new } %>
      <%= turbo_stream_from "comments" %>
    </div>

    <div id="O_replyComment">
      <% @trail.comments.no_replies.each do |comment| %>
        <%= render "comments/comment", comment: comment %>
      <% end %>
    </div>
  </div>
</body>