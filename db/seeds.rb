@allFandoms = [
  { name: 'Атлантида', description: 'Тайны древней цивилизации, скрытой под водой.' },
  { name: 'Шерлок', description: 'Гениальный детектив раскрывает самые сложные преступления.' },
  { name: 'Star Wars', description: 'Давным-давно, в далекой-далекой галактике...' },
  { name: 'My Little Pony', description: 'Дружба - это чудо!' },
  { name: 'Доктор Кто', description: 'Путешествия во времени и пространстве с эксцентричным Доктором.' },
  { name: 'Ван Пис', description: 'Приключения пиратов в поисках легендарного сокровища.' },
  { name: 'Голодные игры', description: 'Борьба за выживание в жестоком мире Панема.' },
  { name: '1984', description: 'Антиутопический мир тотального контроля и подавления личности.' },
  { name: 'Игра Престолов', description: 'Борьба за власть в Вестеросе, где играют, либо умирают.' },
  { name: 'Хроники Нарнии', description: 'Волшебная страна, где животные говорят и добро сражается со злом.' },
  { name: 'Звёздный десант', description: 'Борьба человечества с арахнидами в далеком космосе.' },
  { name: 'Атака Титанов', description: 'Битва человечества за выживание против гигантских титанов.' },
  { name: 'DC Comics', description: 'Мир супергероев, спасающих человечество от зла.' },
  { name: 'Властелин Колец', description: 'Братство кольца отправляется в опасное путешествие, чтобы уничтожить Кольцо Всевластия.' },
  { name: 'Marvel', description: 'Вселенная супергероев, где каждый обладает невероятными способностями.' },
  { name: 'Баскетбол Куроко', description: 'История о невероятных баскетболистах, стремящихся к победе.' },
  { name: 'Мы', description: 'Антиутопия, где люди - лишь номера в тоталитарном государстве.' },
  { name: 'Гарри Поттер', description: 'Приключения юного волшебника в школе Хогвартс.' },
  { name: 'Наруто', description: 'История о молодом ниндзя, стремящемся стать Хокаге.' },
  { name: 'Сумерки', description: 'Любовь между вампиром и обычной девушкой.' },
  { name: 'Клуб романтики', description: 'Интерактивные истории о любви и приключениях.' },
  { name: 'Космическая Одиссея', description: 'Философское путешествие к истокам человечества и за его пределы.' },
  { name: 'Однажды в сказке', description: 'Сказочные персонажи оказываются в реальном мире.' },
  { name: 'Великолепный век', description: 'Интриги и любовь в Османской империи времен правления Сулеймана Великолепного.' }
]
            
@nicknames = [ "sashaiskatel", "igorveber", "spookypirate", 
                "flobara", "dachanacha", "nebozhitel", 
                "lenabistra", "pupsik", "kreativnyy", 
                "misterx", "lazernyy_rytsar", "zabavnyj_kot", 
                "snezhnyj_lev", "koshka_v_sapogah", "veteran_gamer", 
                "tvorcheskiy_duh", "mystic_wanderer", 
                "luna_iz_mira", "neon_ryba", "kultura_vechera" ]

@cities = [ "калининград", "санкт-петербург", 
          "владивосток", "париж", "москва", 
          "тюмень", "екатеринбург", "новосибирск", 
          "самара", "ростов-на-дону", "казань", 
          "нижний новгород", "челябинск", "ульяновск", 
          "воронеж", "пермь", "сочи", 
          "архангельск", "кострома", "волгоград" ]

@bios = [
          "люблю гулять и пиццу",
          "самый преданный фанат своего фандома (спорьте с воздухом, кто не согласен)",
          "продам твою душу за початок кукурузы",
          "геодезист",
          "люблю прикольные картинки и ходилки",
          "профессиональный исследователь человеческих душ",
          "мечтатель с головой в облаках",
          "коллекционер забавных мемов",
          "жизнь — это игра, а я её главный герой",
          "путешественник по мирам книг и фильмов",
          "всегда готов к новым приключениям",
          "обожаю кофе и долгие разговоры",
          "просто человек с хорошим чувством юмора",
          "в поисках идеального пончика",
          "собираю впечатления, а не вещи",
          "вдохновляюсь природой и искусством",
          "фанат настольных игр и вечеринок",
          "люблю танцевать под дождём",
          "жизнь — это искусство, а я — художник",
          "всегда на стороне добра и справедливости",
          "покоритель виртуальных миров"
        ]

@trail_titles = {
  'Атлантида' => [
    { title: "Тайны подводного мира Атлантиды", body: "Исследуйте загадочные глубины Атлантиды и откройте ее древние секреты." },
    { title: "Путешествие к затонувшей цивилизации", body: "Отправьтесь в опасное путешествие к затонувшим руинам и раскройте их тайны." },
    { title: "Загадки кристаллов Атлантиды", body: "Разгадайте тайны магических кристаллов, которые скрывают силу древней цивилизации." },
    { title: "Атлантида: путь к спасению", body: "Станьте героем, который должен спасти остатки Атлантиды от полного исчезновения." },
    { title: "Время против Атлантиды", body: "Вступите в борьбу со временем, чтобы предотвратить катастрофу древнего мира." },
    { title: "Затерянный город Атлантиды", body: "Найдите легендарный город, скрытый под водой, и раскройте его тайны." },
    { title: "Магия воды Атлантиды", body: "Исследуйте магические свойства воды, которые делают Атлантиду уникальной." },
    { title: "Тайна атлантов", body: "Узнайте, кто такие атланты и как они смогли создать свою цивилизацию." },
    { title: "Атлантида: последний ключ", body: "Найдите последний ключ, который поможет восстановить древнюю мощь Атлантиды." },
    { title: "Подводные храмы Атлантиды", body: "Исследуйте древние храмы, скрытые в глубинах океана, и раскройте их секреты." }
  ],
  'Шерлок' => [
    { title: "Шерлок и дело о пропавшем артефакте", body: "Помогите Шерлоку Холмсу раскрыть тайну исчезновения ценного артефакта." },
    { title: "Тайна Бейкер-стрит", body: "Исследуйте загадки, которые скрываются в самом сердце Лондона." },
    { title: "Загадочные шифры Шерлока", body: "Разгадайте сложные шифры и помогите Шерлоку раскрыть преступление." },
    { title: "Соперничество с Мориарти", body: "Вступите в интеллектуальную битву с величайшим врагом Шерлока." },
    { title: "Тайна старинной рукописи", body: "Раскройте секреты древней рукописи, которая может изменить ход истории." },
    { title: "Пропавшая картина", body: "Найдите пропавший шедевр искусства и раскройте мотивы похищения." },
    { title: "Дело о двойном убийстве", body: "Расследуйте запутанное дело о двойном убийстве в Лондоне." },
    { title: "Шерлок и тайна часов", body: "Разгадайте загадку старинных часов, которые хранят секрет убийства." },
    { title: "Тайна исчезнувшего поезда", body: "Найдите поезд, который бесследно исчез ночью, и раскройте правду." },
    { title: "Шерлок против времени", body: "Вступите в гонку со временем, чтобы предотвратить новое преступление." }
  ],
  'Star Wars' => [
    { title: "Звёздные приключения: путь к свету", body: "Присоединяйтесь к джедаям в их борьбе против тьмы." },
    { title: "Сила и тьма: тропа джедая", body: "Откройте для себя путь джедая и его испытания на пути к мастерству." },
    { title: "Восстание против Империи", body: "Сражайтесь за свободу и справедливость против злой Империи." },
    { title: "Путешествие по галактике", body: "Исследуйте различные планеты и их уникальные культуры." },
    { title: "Тайна древних ситхов", body: "Раскройте секреты древних ситхов и их влияние на галактику." },
    { title: "Звезда судьбы", body: "Найдите легендарную звезду, которая решит судьбу всей галактики." },
    { title: "Битва за Корусант", body: "Защитите столицу галактики от атак Империи." },
    { title: "Поиск утраченного знания", body: "Откройте древние знания, которые могут изменить ход войны." },
    { title: "Тайна космического ключа", body: "Найдите ключ, который откроет новые горизонты для джедаев." },
    { title: "Герои далеких звезд", body: "Следуйте за героями, которые борются за будущее своей галактики." }
  ],
  'My Little Pony' => [
    { title: "Пони на границе реальности", body: "Помогите пони сохранить мир в Эквестрии от зла." },
    { title: "Магия дружбы в Эквестрии", body: "Узнайте, как дружба может преодолеть любые преграды." },
    { title: "Приключения искателей приключений", body: "Присоединяйтесь к пони в их захватывающих приключениях." },
    { title: "Тайна потерянной радуги", body: "Найдите потерянную радугу, чтобы вернуть цвета в Эквестрию." },
    { title: "Дружба против тьмы", body: "Соберите команду пони, чтобы победить тьму, угрожающую миру." },
    { title: "Пони и магический кристалл", body: "Защитите магический кристалл от злодеев, желающих захватить его силу." },
    { title: "Праздник дружбы", body: "Организуйте праздник, который объединит всех жителей Эквестрии." },
    { title: "Тайна леса вечной ночи", body: "Исследуйте лес, где всегда ночь, и раскройте его загадку." },
    { title: "Пони и звездный ключ", body: "Найдите звездный ключ, который откроет новые возможности для Эквестрии." },
    { title: "Пони против хаоса", body: "Сражайтесь с силами хаоса, чтобы защитить гармонию в мире пони." }
  ],
  'Доктор Кто' => [
    { title: "Время и пространство с Доктором", body: "Путешествуйте во времени и пространстве с Доктором и его спутниками." },
    { title: "Встреча с Далеками", body: "Сразитесь с одним из самых известных врагов Доктора." },
    { title: "Парадоксы времени Доктора", body: "Разберитесь с временными парадоксами, которые могут изменить судьбу мира." },
    { title: "Исследование новых планет", body: "Посетите удивительные планеты и встретите их обитателей." },
    { title: "Тайна потерянного времени", body: "Раскройте загадку времени, которое исчезло из исторической линии." },
    { title: "Доктор и время ангелов", body: "Спасите прошлое и будущее от коварных ангелов времени." },
    { title: "Ключи времени", body: "Найдите ключи времени, которые решат судьбу вселенной." },
    { title: "Путешествие в параллельные миры", body: "Исследуйте миры, которые существуют параллельно с вашим." },
    { title: "Доктор против тьмы", body: "Сражайтесь с тьмой, которая угрожает поглотить все временные линии." },
    { title: "Тайна ТАРДИС", body: "Раскройте секреты легендарной машины времени ТАРДИС." }
  ],
  'Ван Пис' => [
    { title: "Приключения на море с Ван Писом", body: "Отправьтесь в захватывающее морское путешествие с командой пиратов." },
    { title: "В поисках легендарного сокровища", body: "Ищите сокровища, которые могут изменить мир!" },
    { title: "Битва за свободу с Ван Писом", body: "Сражайтесь за свою свободу против сильных противников." },
    { title: "Дружба и преданность на море", body: "Узнайте, как дружба помогает преодолевать любые трудности." },
    { title: "Остров забытых душ", body: "Исследуйте остров, где живут души тех, кто был забыт временем." },
    { title: "Тайна морского картографа", body: "Раскройте секреты картографа, который знает все о морях." },
    { title: "Битва за Гранд Лайн", body: "Сражайтесь за контроль над самой опасной морской трассой." },
    { title: "Легенда о Золотом Роджере", body: "Узнайте историю легендарного пирата и его сокровищ." },
    { title: "Пиратский кодекс чести", body: "Следуйте кодексу чести пиратов, чтобы добиться уважения." },
    { title: "Морская буря и тайна компаса", body: "Найдите компас, который покажет путь к самым большим сокровищам." }
  ],
  'Голодные игры' => [
    { title: "Выживание в Капитолии", body: "Сражайтесь за свою жизнь в Голодных играх." },
    { title: "Битва за справедливость в Панеме", body: "Присоединяйтесь к восстанию против угнетения." },
    { title: "Стратегия выживания", body: "Разработайте план, чтобы выжить в жестоком мире Голодных игр." },
    { title: "Охотники на арене", body: "Станьте охотником и сразитесь с другими участниками за право на жизнь." },
    { title: "Тайна арены", body: "Раскройте секреты арены, чтобы получить преимущество перед врагами." },
    { title: "Друзья или враги", body: "Выберите, кому доверять в борьбе за выживание." },
    { title: "Последний выживший", body: "Станьте последним выжившим и получите свободу." },
    { title: "Тайна мокингджэя", body: "Раскройте символ восстания и станьте лидером борьбы." },
    { title: "План побега", body: "Разработайте стратегию побега с арены, чтобы спастись." },
    { title: "Жертвы ради победы", body: "Примите сложные решения, чтобы выжить в игре." }
  ],
  '1984' => [
    { title: "Борьба за свободу мысли", body: "Сопротивляйтесь тоталитарному режиму и боритесь за свои права." },
    { title: "Бегство от Большого Брата", body: "Найдите способ скрыться от всевидящего ока общества." },
    { title: "Поиск правды в мире лжи", body: "Раскройте правду о мире, который вас окружает." },
    { title: "Тайны министерства правды", body: "Проникните в министерство правды и узнайте его секреты." },
    { title: "Борьба за человечность", body: "Сохраните свою человечность в мире, где чувства под запретом." },
    { title: "Книга правды", body: "Найдите книгу, которая откроет вам глаза на истину." },
    { title: "История одного восстания", body: "Присоединяйтесь к тем, кто борется за свободу." },
    { title: "Тайна комнаты 101", body: "Раскройте страшную тайну комнаты, которая ломает людей." },
    { title: "Время против системы", body: "Вступите в борьбу с системой, которая контролирует все аспекты жизни." },
    { title: "Последний акт свободы", body: "Совершите последний акт свободы, чтобы изменить мир." }
  ],
  'Игра Престолов' => [
    { title: "Восхождение на Железный трон", body: "Сражайтесь за власть в жестоком мире Вестероса." },
    { title: "Интриги и предательства в Вестеросе", body: "Разгадайте сложные политические интриги между домами." },
    { title: "Битва за власть семи королевств", body: "Участвуйте в эпических сражениях за контроль над королевством." },
    { title: "Тайна драконьего яйца", body: "Раскройте секрет драконьего яйца, которое может изменить ход истории." },
    { title: "Семь королевств и один трон", body: "Сражайтесь за единственный трон, который решит судьбу всех королевств." },
    { title: "Зима близко", body: "Подготовьтесь к зиме, которая принесет новые угрозы." },
    { title: "Тайна Стены", body: "Раскройте загадку Стены и того, что находится за ней." },
    { title: "Дом Ланнистеров против Старков", body: "Следите за противостоянием двух могущественных домов." },
    { title: "Король ночи", body: "Остановите Короля ночи, который угрожает всему миру." },
    { title: "Последняя битва", body: "Сражайтесь в финальной битве за будущее Вестероса." }
  ],
  'Хроники Нарнии' => [
    { title: "Путешествие по Нарнии: за пределами шкафчика", body: "Исследуйте волшебный мир Нарнии, полный чудес и опасностей." },
    { title: "Битва за Нарнию", body: "Сразитесь со злом, угрожающим Нарнии, и защитите ее обитателей." },
    { title: "Волшебство и приключения в Нарнии", body: "Откройте для себя магию, которая пронизывает каждый уголок Нарнии." },
    { title: "Тайна белой колдуньи", body: "Раскройте планы белой колдуньи и остановите ее зло." },
    { title: "Лев, колдунья и платяной шкаф", body: "Следуйте за героями, которые попали в Нарнию через шкаф." },
    { title: "Принц Кaspian и его приключения", body: "Помогите принцу Кaspianу вернуть себе трон." },
    { title: "Путешествие на край света", body: "Отправьтесь в путешествие к краю света, чтобы найти ответы." },
    { title: "Тайна летающего корабля", body: "Исследуйте корабль, который может летать, и раскройте его секреты." },
    { title: "Магия четырех тронов", body: "Узнайте, как магия связывает троны Нарнии." },
    { title: "Последнее сражение", body: "Сражайтесь в финальной битве за будущее Нарнии." }
  ],
  'Звёздный десант' => [
    { title: "Звёздный десант: битва за Землю", body: "Примите участие в эпических космических сражениях за свою планету." },
    { title: "Миссия на Марс", body: "Отправьтесь на опасную миссию для спасения человечества." },
    { title: "Борьба с арахнидами в космосе", body: "Сразитесь с опасными врагами, угрожающими существованию человечества." },
    { title: "Тайна космического оружия", body: "Найдите оружие, которое поможет победить арахнидов." },
    { title: "Последний рубеж обороны", body: "Защитите последний рубеж обороны человечества." },
    { title: "Тайна планеты Клендал", body: "Раскройте секреты планеты, где началось вторжение." },
    { title: "Космический десант против тьмы", body: "Сражайтесь с тьмой, которая угрожает всему космосу." },
    { title: "Звездная база Омега", body: "Защитите базу, которая является ключом к победе над врагами." },
    { title: "Путь к победе", body: "Найдите путь, который приведет человечество к победе." },
    { title: "Тайна капитана Райко", body: "Раскройте тайну легендарного капитана, который может изменить ход войны." }
  ],
  'Атака Титанов' => [
    { title: "Последняя надежда человечества", body: "Сражайтесь за выживание против гигантов, угрожающих вашему миру." },
    { title: "Битва с гигантами", body: "Используйте свои навыки, чтобы победить титанов и защитить людей." },
    { title: "Тайны стены и титанов", body: "Раскройте загадки, скрывающиеся за стенами вашего города." },
    { title: "Титаны против людей", body: "Сражайтесь с титанами, которые хотят уничтожить человечество." },
    { title: "Тайна координат", body: "Раскройте секрет координат, которые могут изменить судьбу мира." },
    { title: "Последний оплот человечества", body: "Защитите последний город, где живут люди." },
    { title: "Титаны внутри нас", body: "Узнайте, как титаны связаны с людьми и их историей." },
    { title: "Тайна королевского титана", body: "Раскройте загадку титана, который управляет другими титанами." },
    { title: "Путь к свободе", body: "Найдите путь, который приведет человечество к свободе." },
    { title: "Финальная битва", body: "Сражайтесь в финальной битве за будущее человечества." }
  ],
  'DC Comics' => [
    { title: "Супергерои против злодеев: битва за Готэм", body: "Защитите Готэм от злодеев вместе с Бэтменом и его союзниками." },
    { title: "Лига справедливости: объединение сил", body: "Объедините силы супергероев, чтобы остановить угрозу мирового масштаба." },
    { title: "Приключения Бэтмена и Супермена", body: "Присоединяйтесь к их приключениям и испытаниям на пути к победе над злом." },
    { title: "Тайна Аркхема", body: "Раскройте секреты психиатрической лечебницы, где находятся самые опасные злодеи." },
    { title: "Суперзлодей Джокер", body: "Сражайтесь с самым опасным врагом Бэтмена — Джокером." },
    { title: "Тайна криптонита", body: "Найдите источник криптонита, который угрожает жизни Супермена." },
    { title: "Лига несправедливости", body: "Остановите группу злодеев, которые объединились против мира." },
    { title: "Тайна Чудо-женщины", body: "Раскройте секреты происхождения Чудо-женщины и ее миссии." },
    { title: "Силы магии и технологии", body: "Сочетайте магию и технологии, чтобы победить злодеев." },
    { title: "Последняя битва за Землю", body: "Сражайтесь в финальной битве за будущее Земли." }
  ],
  'Властелин Колец' => [
    { title: "Путешествие Братства кольца", body: "Пройдите вместе с Братством кольца через опасные земли Средиземья." },
    { title: "Сражение за Средиземье", body: "Участвуйте в эпических битвах за судьбу Средиземья." },
    { title: "Тайны кольца и его силы", body: "Раскройте секреты могущественного кольца и его влияния на мир." },
    { title: "Тень Саурона", body: "Остановите тень Саурона, которая угрожает поглотить Средиземье." },
    { title: "Путь к Мордору", body: "Пройдите через опасные земли, чтобы уничтожить кольцо." },
    { title: "Тайна эльфийских клинков", body: "Раскройте секреты магических клинков, которые помогают в битвах." },
    { title: "Битва за Хельмову Падь", body: "Сражайтесь в легендарной битве за Хельмову Падь." },
    { title: "Тайна Голлума", body: "Узнайте, как Голлум связан с кольцом и его силой." },
    { title: "Последний поход", body: "Присоединяйтесь к последнему походу, который решит судьбу Средиземья." },
    { title: "Финальная битва за Средиземье", body: "Сражайтесь в финальной битве за будущее мира." }
  ],
  'Marvel' => [
    { title: "Мстители: объединение против зла", body: "Соберите команду Мстителей для борьбы с могущественными врагами." },
    { title: "Человек-паук: борьба с преступностью в Нью-Йорке", body: "Используйте свои способности, чтобы защитить город от злодеев." },
    { title: "Тайны вселенной Marvel", body: "Изучите загадки и секреты, скрытые во вселенной Marvel." },
    { title: "Танос против Мстителей", body: "Сражайтесь с могущественным Таносом, который угрожает уничтожить половину вселенной." },
    { title: "Тайна камней бесконечности", body: "Найдите камни бесконечности, чтобы остановить Таноса." },
    { title: "Легенда о Капитане Америке", body: "Узнайте историю Капитана Америки и его роли в борьбе за справедливость." },
    { title: "Тор и его молот", body: "Раскройте тайны молота Мьёльнира и его силы." },
    { title: "Тайна Локи", body: "Узнайте, как Локи связан с Асгардом и его судьбой." },
    { title: "Битва за Землю", body: "Сражайтесь за будущее Земли против могущественных врагов." },
    { title: "Финальная битва Мстителей", body: "Сражайтесь в финальной битве за судьбу вселенной." }
  ],
  'Баскетбол Куроко' => [
    { title: "Путь к чемпионству: баскетбольные баталии", body: "Сразитесь на корте, чтобы стать чемпионом!" },
    { title: "Команда тени: секреты успеха", body: "Узнайте, как команда тени добивается успеха в турнирах." },
    { title: "Сила дружбы на корте", body: "Объедините усилия с друзьями для достижения общих целей!" },
    { title: "Тайна невидимого паса", body: "Разгадайте секрет невидимого паса, который меняет правила игры." },
    { title: "Битва за титул", body: "Сражайтесь за титул лучшей баскетбольной команды страны." },
    { title: "Куроко против Кагами", body: "Следите за противостоянием двух легендарных игроков." },
    { title: "Тайна генерации пятого", body: "Раскройте секрет генерации пятого, которая делает игроков непобедимыми." },
    { title: "Путь к славе", body: "Пройдите путь от новичка до легенды баскетбола." },
    { title: "Турнир мечты", body: "Участвуйте в турнире, который станет решающим для вашей команды." },
    { title: "Финальный матч", body: "Сыграйте финальный матч, который решит судьбу чемпионата." }
  ],
  'Мы' => [
    { title: "Жизнь под контролем: борьба за индивидуальность", body: "Сопротивляйтесь системе и ищите свою истинную сущность." },
    { title: "Система, которая нас подавляет", body: "Рассмотрите мир, где личная свобода под угрозой." },
    { title: "Поиск свободы в мире безликих", body: "Найдите способы обрести индивидуальность в сером обществе." },
    { title: "Тайна серых стен", body: "Раскройте секреты мира, где все живут под контролем." },
    { title: "Борьба за выбор", body: "Сражайтесь за право делать собственные выборы в жизни." },
    { title: "Тайна черных костюмов", body: "Узнайте, как система использует внешний вид для контроля." },
    { title: "Последний акт свободы", body: "Совершите последний акт свободы, чтобы изменить мир." },
    { title: "Тайна безликого лидера", body: "Раскройте тайну человека, который управляет системой." },
    { title: "Поиск цвета в сером мире", body: "Найдите цвета, которые вернут индивидуальность миру." },
    { title: "Финальная битва за свободу", body: "Сражайтесь в финальной битве за право быть собой." }
  ],
  'Гарри Поттер' => [
    { title: "Приключения в Хогвартсе: магия и дружба", body: "Изучайте магию и заводите друзей в школе волшебства!" },
    { title: "Секреты волшебного мира", body: "Раскройте тайны, которые скрыты от обычных людей." },
    { title: "Битва с Темным Лордом", body: "Соберите своих друзей для борьбы с самым могущественным врагом!" },
    { title: "Тайна крестражей", body: "Найдите крестражи, чтобы победить Волан-де-Морта." },
    { title: "Тайна ордена Феникса", body: "Раскройте секреты организации, которая борется с тьмой." },
    { title: "Поиск волшебной палочки", body: "Найдите палочку, которая сделает вас непобедимым." },
    { title: "Тайна камня философов", body: "Раскройте секреты камня, который дарует бессмертие." },
    { title: "Битва за Хогвартс", body: "Сражайтесь за будущее школы волшебства." },
    { title: "Тайна пророчества", body: "Узнайте, как пророчество связывает Гарри и Волан-де-Морта." },
    { title: "Финальная битва за магию", body: "Сражайтесь в финальной битве за будущее волшебного мира." }
  ],
  'Наруто' => [
    { title: "Путь ниндзя: от изгнанника до героя", body: "Пройдите путь ниндзя, от изгоя до героя, тренируйтесь, сражайтесь и становитесь сильнее." },
    { title: "Друзья и враги на пути к Хокаге", body: "Встречайтесь с друзьями и врагами на пути к званию Хокаге, используйте свои навыки и интеллект, чтобы преодолеть препятствия." },
    { title: "Секреты ниндзя: сила дружбы", body: "Убедитесь, что дружба и верность помогают ниндзя преодолевать любые трудности и побеждать в самых сложных битвах." },
    { title: "Экзамен на чунина", body: "Примите участие в сложном экзамене на чунина, сразитесь с сильными противниками и покажите свои навыки и силу." },
    { title: "Противостояние Акацуки", body: "Сразитесь с членами организации Акацуки, защитите своих друзей и деревню от их планов." },
    { title: "Тайна клана Учиха", body: "Раскройте секреты клана Учиха и их влияние на мир ниндзя." },
    { title: "Путь к силе мудреца шести путей", body: "Найдите путь, который приведет вас к силе мудреца шести путей." },
    { title: "Тайна девятихвостого лиса", body: "Раскройте загадку девятихвостого лиса, который живет внутри Наруто." },
    { title: "Последняя битва за Коноху", body: "Сражайтесь в финальной битве за будущее своей деревни." },
    { title: "Наследие Хокаге", body: "Узнайте, как наследие Хокаге влияет на будущее мира ниндзя." }
  ],
  'Сумерки' => [
    { title: "Любовь и опасность вампиров и людей", body: "Исследуйте сложные отношения между вампирами и людьми." },
    { title: "Тайны вампирского мира", body: "Откройте для себя секреты вампиров и их обычаев." },
    { title: "Борьба за любовь в условиях опасности", body: "Защитите свою любовь от угроз со стороны других существ." },
    { title: "Тайна древних вампиров", body: "Раскройте загадки древних вампиров и их влияния на современный мир." },
    { title: "Вампиры против оборотней", body: "Сражайтесь в эпической битве за территорию и власть." },
    { title: "Путь к бессмертию", body: "Узнайте, как стать вампиром и что это значит для вашей жизни." },
    { title: "Тайна клана Калленов", body: "Раскройте секреты семьи Калленов и их уникальной силы." },
    { title: "Легенда о Вольтури", body: "Изучите историю могущественного клана Вольтури и их правил." },
    { title: "Поиск равновесия между светом и тьмой", body: "Найдите способ жить в мире, где вампиры и люди сосуществуют." },
    { title: "Финальная битва за Форкс", body: "Сражайтесь за будущее города, который стал центром событий." }
  ],
  'Клуб романтики' => [
    { title: "Истории любви - выбор судьбы", body: "Каждый выбор может изменить вашу судьбу в мире романтики!" },
    { title: "Приключения и романтика в каждой истории", body: "Погружайтесь в захватывающие истории любви и неожиданные повороты судьбы!" },
    { title: "Сердечные испытания и неожиданные повороты", body: "Пройдите через испытания любви и узнайте, как выбраться из сложных ситуаций!" },
    { title: "Тайны сердца", body: "Раскройте секреты, которые скрывает ваше сердце, и найдите истинную любовь." },
    { title: "Выбор между долгом и чувствами", body: "Сделайте сложный выбор между своими обязательствами и сердцем." },
    { title: "Путешествие через время ради любви", body: "Перенеситесь в прошлое или будущее, чтобы спасти свою любовь." },
    { title: "Любовь в большом городе", body: "Исследуйте романтические приключения в мегаполисе, полном соблазнов." },
    { title: "Тайна старинного письма", body: "Найдите письмо, которое раскроет тайну вашей семьи и вашей любви." },
    { title: "Любовь и предательство", body: "Разберитесь в сложных отношениях, где каждый шаг может быть ловушкой." },
    { title: "Финальный выбор", body: "Сделайте последний выбор, который решит судьбу вашей любви." }
  ],
  'Космическая Одиссея' => [
    { title: "Путешествие к звёздам - философские размышления", body: "Исследуйте вопросы существования через призму космических путешествий!" },
    { title: "Поиск смысла жизни в космосе", body: "Размышляйте о своем месте во Вселенной во время межзвездных путешествий!" },
    { title: "Исследование границ человечества", body: "Погружайтесь в будущее человечества через призму космических исследований!" },
    { title: "Загадка черной дыры", body: "Раскройте тайны черной дыры и ее влияния на пространство-время." },
    { title: "Встреча с инопланетной цивилизацией", body: "Познакомьтесь с высокоразвитой расой и узнайте их секреты." },
    { title: "Тайна заброшенной космической станции", body: "Исследуйте станцию, где произошла трагедия, и найдите ответы." },
    { title: "Путешествие через гиперпространство", body: "Откройте порталы, которые приведут вас к новым горизонтам." },
    { title: "Звездная карта древних", body: "Найдите карту, которая покажет путь к легендарным мирам." },
    { title: "Битва за выживание в космосе", body: "Сражайтесь за жизнь в условиях безжалостного космоса." },
    { title: "Финальное путешествие к центру галактики", body: "Отправьтесь к самому сердцу галактики, чтобы найти истину." }
  ],
  'Однажды в сказке' => [
    { title: "Сказочные персонажи в нашем мире", body: "Узнайте, как сказочные герои адаптируются к современному миру!" },
    { title: "Приключения героев из сказок", body: "Следуйте за любимыми персонажами в их захватывающих приключениях!" },
    { title: "Любовь и интриги в мире сказок", body: "Исследуйте романтические линии и интриги среди сказочных героев!" },
    { title: "Тайна проклятого королевства", body: "Раскройте секреты королевства, которое находится под проклятием." },
    { title: "Поиск потерянной сказки", body: "Найдите сказку, которая была утеряна во времени." },
    { title: "Магия и реальность", body: "Узнайте, как магия влияет на реальный мир и его обитателей." },
    { title: "Тайна злодейской книги", body: "Раскройте загадку книги, которая управляет судьбами героев." },
    { title: "Побег из темницы сказок", body: "Найдите способ освободиться из мира, где все истории переплетены." },
    { title: "Битва за счастливый конец", body: "Сражайтесь за право всех сказок закончиться хорошо." },
    { title: "Финальная глава сказочного мира", body: "Завершите историю, которая изменит судьбу всех персонажей." }
  ],
  'Великолепный век' => [
    { title: "Интриги во дворце Османской империи", body: "Погрузитесь в мир политических интриг и любовных связей!" },
    { title: "Любовь и политика времен Сулеймана", body: "Следуйте за историей любви на фоне политической борьбы!" },
    { title: "Секреты великого правления", body: "Раскройте тайны правления величайших султанов Османской империи!" },
    { title: "Тайна гарема", body: "Исследуйте тайны жизни женщин в гареме и их влияния на власть." },
    { title: "Борьба за трон", body: "Сражайтесь за право занять трон Османской империи." },
    { title: "Легенда о Хюррем", body: "Узнайте историю любви и власти, которая изменила судьбу империи." },
    { title: "Тайна шпионов в дворцовом коридоре", body: "Раскройте заговоры, которые угрожают стабильности государства." },
    { title: "Поиск справедливости в империи", body: "Найдите способ восстановить справедливость в условиях жестокой политики." },
    { title: "Битва за веру и традиции", body: "Защитите религиозные и культурные ценности империи." },
    { title: "Финальная битва за наследие", body: "Сражайтесь за наследие, которое определит будущее Османской империи." }
  ]
}

@raw_text = "Путешествие — это открытие новых горизонтов и возможность увидеть мир с другой стороны. 
            Когда мы отправляемся в путь, нас ожидает множество незнакомых мест и людей. 
            Каждый день приносит новые впечатления, которые обогащают наш опыт. 
            Путешествие также помогает нам лучше понять самих себя. 
            Мы сталкиваемся с неожиданными ситуациями, которые требуют от нас гибкости и смекалки. 
            Эти моменты учат нас принимать решения в условиях неопределенности. 
            Мы развиваем навыки управления стрессом и становимся более уверенными в своих силах. 
            Путешествуя, мы учимся ценить разнообразие культур и традиций. 
            Это не только физическое перемещение, но и глубокое внутреннее преобразование. 
            В конечном итоге, каждое путешествие становится частью нашей истории и формирует наше восприятие мира."

@words = @raw_text.downcase.gsub(/[—.—,«»:;()]/, '').gsub(/  /, ' ').split(' ')

@point_names = [
  "Пир у короля",
  "Водные сады Мартеллов",
  "Север (старки)",
  "Железные острова",
  "Планетарий",
  "Центр мастер-классов"
]

@point_descriptions = [
  "Прикольное и красивое местечко",
  "Ну, вообще вау, прямо, как в сериале",
  "Восторг от такой красоты, погружает в атмосферу",
  "Такое завершение маршрута не может быть лучше",
  "Очень крутое место, можно выбрать разные сюжеты",
  "После планетария решили стать еще умнее"
]

@point_map_links = [
  "https://maps.app.goo.gl/txumeh... ",
  "https://maps.app.goo.gl/yvzopq... ",
  "https://maps.app.goo.gl/zwrstx... "
]

def reset_db
  Rake::Task['db:drop'].invoke
  Rake::Task['db:create'].invoke
  Rake::Task['db:migrate'].invoke
end

def seed
  reset_db
  create_fandom
  create_users(10)
  create_trail(2...5)
  create_comments(2..4)
end

def create_fandom
  @allFandoms.each do |fandom_data|
    Fandom.create!(name: fandom_data[:name], description: fandom_data[:description])
    puts "Fandom with name #{fandom_data[:name]} created"
  end
  puts "Total fandoms created: #{Fandom.count}"
end

def upload_random_avatar(profile)
  avatar_directory = Rails.root.join('public', 'uploads', 'avatars')
  avatar_paths = Dir.glob("#{avatar_directory}/*.{jpg,jpeg,png,gif}")

  if avatar_paths.empty?
    puts "No avatars found in directory: #{avatar_directory}"
    return
  end

  random_avatar = avatar_paths.sample
  puts "Selected avatar: #{random_avatar}"

  # Загружаем файл
  profile.avatar = File.open(random_avatar)
  if profile.save!
    puts "Avatar saved to: #{profile.avatar.url}"
  else
    puts "Error: #{profile.errors.full_messages}"
  end
end

def upload_random_trail_image(trail)
  image_directory = Rails.root.join('public', 'uploads', 'trail')
  image_paths = Dir.glob("#{image_directory}/*.{jpg,jpeg,png,gif}")

  if image_paths.empty?
    puts "No images found in directory: #{image_directory}"
    return
  end

  random_image = image_paths.sample
  puts "Selected image: #{random_image}"

  # Открываем файл и сохраняем через CarrierWave
  File.open(random_image) do |file|
    trail.image = file
    if trail.save
      puts "Image saved to: #{trail.image.url}"
    else
      puts "Error: #{trail.errors.full_messages}"
    end
  end
end

def create_users(quantity)
  # Проверка, что массивы не пустые
  raise "Nicknames array is empty!" if @nicknames.empty?
  raise "Bios array is empty!" if @bios.empty?
  raise "Cities array is empty!" if @cities.empty?

  # Проверка, что фандомы существуют
  if Fandom.count.zero?
    raise "No fandoms in the database! Please seed fandoms first."
  end

  created_emails = []
  created_nicknames = []

  quantity.times do |i|
    # Генерация уникального email
    email = "user#{i + 1}@email.com"

    while created_emails.include?(email)
      email = "user#{rand(1000)}@email.com"
    end

    # Генерация уникального nickname
    nickname = @nicknames.sample
    while created_nicknames.include?(nickname)
      nickname = @nicknames.sample
      if @nicknames.all? { |n| created_nicknames.include?(n) }
        raise "All nicknames are already used!"
      end
    end

    # Создание пользователя
    user_data = {
      email: email,
      password: "passpass"
    }

    user_data[:admin] = true if i == 0

    user = User.create!(user_data)
    created_emails << email
    puts "User created with id #{user.id}"

    # Создание профиля
    profile_data = {
      user_id: user.id,
      nickname: nickname,
      bio: @bios.sample,
      city: @cities.sample,
      fandom_names: Fandom.all.sample(rand(2..5)).map(&:name)
    }

    profile = Profile.new(profile_data)

    # Загрузка аватара
    upload_random_avatar(profile)

    if profile.save!
      puts "Profile created for user with id #{user.id}: #{profile.nickname}"
    else
      puts "Failed to create profile for user with id #{user.id}: #{profile.errors.full_messages.join(', ')}"
    end

    # Присоединение фандомов
    random_fandoms = Fandom.all.sample(rand(2..5))
    profile.update!(fandom_names: random_fandoms.map(&:name))
    random_fandoms.each do |fandom|
      puts "Fandom #{fandom.name} assigned to profile with id #{profile.id}"
    end

    created_nicknames << nickname
  end
end

def create_fandoms_for_user(user)
  random_fandoms = Fandom.all.sample(rand(2..5))  
    random_fandoms.each do |fandom|   
      puts "Fandom #{fandom.name} assigned to user #{user.id}"   
    end  
end 

def get_random_bool
  [true, false].sample
end

def get_random_time
  (30...90).to_a.sample
end

def get_random_level
  (1...10).to_a.sample
end

def create_sentence
  sentence_words = []
  
  (10..20).to_a.sample.times do
    sentence_words << @words.sample
  end
  sentence = sentence_words.join(' ').capitalize + '.'
end

def create_trail(quantity)
  if User.count == 0
    puts "There are no users."
    return
  end

  # Каталог с изображениями для точек маршрута
  point_image_directory = Rails.root.join('public', 'uploads', 'trail')
  point_image_paths = Dir.glob("#{point_image_directory}/*.{jpg,jpeg,png,gif}")
                         .select { |file| File.file?(file) }

  if point_image_paths.empty?
    puts "No images found in directory: #{point_image_directory}"
    return
  end

  Fandom.all.each do |fandom|
    rand(3..10).times do
      user = User.all.sample
      profile = user.profile
      if profile.nil?
        puts "No profile found for user with id #{user.id}. Skipping this attempt."
        next
      end

      fandom_trails = @trail_titles[fandom.name]
      if fandom_trails.nil? || fandom_trails.empty?
        puts "No trail titles found for fandom: #{fandom.name}"
        next
      end

      trail_data = nil
      max_attempts = 10
      attempts = 0

      while trail_data.nil? && attempts < max_attempts
        attempts += 1
        temp_trail_data = fandom_trails.sample
        if temp_trail_data.nil?
          puts "No trail data found for fandom: #{fandom.name}. Skipping this attempt."
          next
        end

        existing_trail = Trail.find_by(title: temp_trail_data[:title], fandom: fandom)
        if existing_trail.nil?
          trail_data = temp_trail_data
        else
          puts "Trail with title #{temp_trail_data[:title]} for fandom #{fandom.name} already exists. Trying again."
        end
      end

      if trail_data.nil?
        puts "Could not find a unique trail for fandom #{fandom.name} after #{max_attempts} attempts. Skipping."
        next
      end

      trail = Trail.new(
        title: trail_data[:title],
        body: trail_data[:body],
        fandom: fandom,
        city: @cities.sample,
        user: user,
        profile: profile,
        trail_time: get_random_time,
        trail_level: get_random_level,
        public: get_random_bool,
        duration: rand(30..300),
        distance: rand(1..10),
        difficulty: ["легкий", "средний", "сложный"].sample
      )

      # случайное изображение
      upload_random_trail_image(trail)

      if trail.save
        puts "Trail with title #{trail.title} just created"

        # случайные точки маршрута
        rand(2..5).times do |i|
          point_data = {
            name: @point_names.sample,
            description: point_data,
            image_url: point_image_paths.sample,
            map_link: @point_map_links.sample
          }

          trail.trail_points.create!(point_data)
        end

        puts "Added random points to trail #{trail.title}"
      else
        puts "Error creating trail: #{trail.errors.full_messages.join(', ')}"
      end
    end
  end
  puts Trail.count
end

def get_random_time
  # Генерация случайного времени
  hours = rand(1..12)
  minutes = rand(0..59)
  "#{hours}ч #{minutes}мин"
end

def get_random_level
  # Случайный уровень сложности
  ["легкий", "средний", "сложный"].sample
end

def create_comments(quantity)
  Trail.all.each do |trail|
    rand(quantity).times do
      user = User.all.sample
      comment = Comment.create(
        trail_id: trail.id,
        user_id: user.id,
        body: create_sentence,
        rating_value: rand(1..5)
      )
      # puts "Comment with id #{comment.id} for trail with id #{comment.trail.id} created by user #{user.email}"
    end
  end
end

def create_comment_replies(quantity)
  Comment.all.each do |comment|
    if rand(1..3) == 1
      comment_reply = comment.replies.create(comment_id: comment.id, body: create_sentence)
      puts "Comment reply with id #{comment_reply.id} for pin with id #{comment_reply.trail.id} just created"
    end
  end
end


seed